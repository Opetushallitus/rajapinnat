<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="https://syssgx.github.com/xml.js/js/xmllint.js"></script>
    <script type="text/javascript">
        function devlog(msg) { if (!(typeof console === "undefined" || typeof console.log === "undefined")) { try { console.log(msg); } catch(e) {} } } // logging func for dev env
        function validate() {
            //create an object
            var Module = {
                xml: $("#xmlData").val(),
                schema: $("#schemaData").val(),
                arguments: ["--noout", "--schema", /*schemaFile*/"schema", "XML"]
            };
            //and call function
            var xmllint = validateXML(Module);
            devlog(xmllint);
            $("#result").val(xmllint);
        }
        function update(schemaName) {
            devlog("update.. schemaName: "+schemaName);
            var schemaFile = schemaName+'.xsd';
            var xmlSampleFile = schemaName+'.xml';
            // xml/xsd links
            $("#schemaFile").attr("href", schemaFile);
            $("#xmlSampleFile").attr("href", xmlSampleFile);
            // load data
            $.get(xmlSampleFile, function (xmlData) {
                $("#xmlData").val(xmlData);
                $.get(schemaFile, function (schemaData) {
                    $("#schemaData").val(schemaData);
                    validate();
                }, "text");
            }, "text");
        }
        $(function() {
            update("perusopetusArvosanat");
        });
    </script>

</head>
<body style="padding-left: 20px;">

<h2 style="font-size: smaller;">Perusopetustietojensiirron rajapinnan testisivu (vanhentunut, ei toimi skeema importtien kanssa)</h2>
Skeema:
<select onclick="update(this.value)">
    <option>perusopetusArvosanat</option>
    <option>perusopetusHenkiloTiedot</option>
    <option>hakijat</option>
</select>
<br/>
XML <a href="#" id="xmlSampleFile">(link to xml sample)</a>:
<br/>
<textarea id="xmlData" style="width: 800px; height: 200px; font-size: smaller;"></textarea>
<br/>
SCHEMA <a href="#" id="schemaFile">(link to schema)</a>:
<br/>
<textarea id="schemaData" style="width: 800px; height: 100px; font-size: smaller;"></textarea>
<br/>
<button onclick="validate();">Validate</button> (HUOM! Ei toimi IE:ll√§)
<br/>
RESULT:
<br/>
<textarea id="result" style="width: 800px; height: 100px;" readonly="readonly"></textarea>
<br/>


</body>
</html>
